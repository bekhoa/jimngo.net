const counties=[{loan:"CalHFA FHA",county:"Los Angeles",loan_limit:726525,down_payment:.035,zip:0},{loan:"CalPLUS FHA with 2% ZIP",county:"Los Angeles",loan_limit:726525,down_payment:.035,zip:.02},{loan:"CalPLUS FHA with 3% ZIP",county:"Los Angeles",loan_limit:726525,down_payment:.035,zip:.03},{loan:"CalHFA Conventional",county:"Los Angeles",loan_limit:726525,down_payment:.03,zip:0},{loan:"CalPLUS Conventional with 2% ZIP",county:"Los Angeles",loan_limit:726525,down_payment:.03,zip:.02},{loan:"CalPLUS Conventional with 3% ZIP",county:"Los Angeles",loan_limit:726525,down_payment:.03,zip:.03},{loan:"CalHFA FHA",county:"San Bernardino",loan_limit:431250,down_payment:.035,zip:0},{loan:"CalPLUS FHA with 2% ZIP",county:"San Bernardino",loan_limit:431250,down_payment:.035,zip:.02},{loan:"CalPLUS FHA with 3% ZIP",county:"San Bernardino",loan_limit:431250,down_payment:.035,zip:.03},{loan:"CalHFA Conventional",county:"San Bernardino",loan_limit:484350,down_payment:.03,zip:0},{loan:"CalPLUS Conventional with 2% ZIP",county:"San Bernardino",loan_limit:484350,down_payment:.03,zip:.02},{loan:"CalPLUS Conventional with 3% ZIP",county:"San Bernardino",loan_limit:484350,down_payment:.03,zip:.03},{loan:"CalHFA_FHA",county:"others",loan_limit:431250,down_payment:.035,zip:0},{loan:"CalPLUS FHA with 2% ZIP",county:"others",loan_limit:431250,down_payment:.035,zip:.02},{loan:"CalPLUS FHA with 3% ZIP",county:"others",loan_limit:431250,down_payment:.035,zip:.03},{loan:"CalHFA Conventional",county:"others",loan_limit:484350,down_payment:.03,zip:0},{loan:"CalPLUS Conventional with 2% ZIP",county:"others",loan_limit:484350,down_payment:.03,zip:.02},{loan:"CalPLUS Conventional with 3% ZIP",county:"others",loan_limit:484350,down_payment:.03,zip:.03}],dpas=[{dpa_program:"MyHome",second_loan_percent:.035},{dpa_program:"School Program",second_loan_percent:.04},{dpa_program:"None",second_loan_percent:0}];for(var flyers=document.getElementById("flyers").getElementsByClassName("collapsible"),i=0;i<flyers.length;i++)flyers[i].addEventListener("click",function(){for(var contents=document.getElementById("flyers").getElementsByClassName("content"),j=0;j<contents.length;j++)contents[j].style.maxHeight=null;if(this.classList.contains("active"))this.classList.remove("active");else{for(var k=0;k<flyers.length;k++)flyers[k].classList.remove("active");this.classList.toggle("active");var content=this.nextElementSibling;content.style.maxHeight=content.scrollHeight+"px"}});function calc(){var i,tabcontent;county=document.getElementById("county").value,purchase_price=Number(document.getElementById("purchase-price").value),document.getElementById("Purchase-Price").innerHTML=purchase_price.toLocaleString(),document.getElementById("Purchase-Price-2").innerHTML=purchase_price.toLocaleString(),closing_costs=.02*purchase_price,document.getElementById("Closing-Costs").innerHTML=closing_costs.toLocaleString(),document.getElementById("Closing-Costs-2").innerHTML=closing_costs.toLocaleString(),property_type=document.getElementById("property-type").value,loan_program=document.getElementById("loan-program").value,document.getElementById("Loan-Program").innerHTML=loan_program,loan_limit=counties.find(loan_limit=>loan_limit.loan===loan_program&&loan_limit.county===county).loan_limit,down_payment=counties.find(down_payment=>down_payment.loan===loan_program).down_payment,zip=counties.find(zip=>zip.loan===loan_program).zip,"VA"===loan_program?mi_rate=0:"CalHFA FHA"===loan_program||"CalPLUS FHA with 2% ZIP"===loan_program||"CalPLUS FHA with 3% ZIP"===loan_program?mi_rate=.85:"CalHFA Conventional"!==loan_program&&"CalPLUS Conventional with 2% ZIP"!==loan_program&&"CalPLUS Conventional with 3% ZIP"!==loan_program||(mi_rate=Number(document.getElementById("mi").value)),document.getElementById("MI%").innerHTML=mi_rate.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),subordinate_loan=document.getElementById("subordinate-loan").value,document.getElementById("Subordinate-Loan").innerHTML=subordinate_loan,dpa=dpas.find(second_loan_percent=>second_loan_percent.dpa_program===subordinate_loan).second_loan_percent,second_loan_amount=purchase_price*dpa,document.getElementById("second-loan-amount").innerHTML=second_loan_amount.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0});var tabcontent=document.getElementById("subordinate-loans").getElementsByClassName("tabcontent");for(i=0;i<tabcontent.length;i++)tabcontent[i].style.display="none";document.getElementById(subordinate_loan).style.display="block",interest_rate=Number(document.getElementById("expected-interest-rate").value),document.getElementById("Expected-Interest-Rate").innerHTML=interest_rate.toFixed(3),high_balance_fee_rate=Number(document.getElementById("high-balance-fee-rate").value),document.getElementById("High-Balance-Fee-Rate").innerHTML=high_balance_fee_rate.toFixed(3),base_loan=purchase_price*(1-down_payment),base_loan>loan_limit&&(base_loan=loan_limit),base_loan>484350?(document.getElementById("high-balance-loan").style.display="block",document.getElementById("high-balance-fee").style.display="block",calc_high_balance_fee()):(document.getElementById("high-balance-loan").style.display="none",document.getElementById("high-balance-fee").style.display="none",high_balance_fee=0),"CalHFA FHA"===loan_program||"CalPLUS FHA with 2% ZIP"===loan_program||"CalPLUS FHA with 3% ZIP"===loan_program?upfront_mip=.0175*base_loan:upfront_mip=0,document.getElementById("upfront").innerHTML=upfront_mip.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}),total_first_loan=base_loan+upfront_mip,document.getElementById("first-loan").innerHTML=total_first_loan.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0});var n=360,r=interest_rate/1200;loan_amount=total_first_loan,principal_interest=loan_amount*r/(1-Math.pow(1/(1+r),n)),document.getElementById("Principal-Interest").innerHTML=principal_interest.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),property_tax_rate=.0125,property_tax=property_tax_rate*purchase_price/12,document.getElementById("Property-Tax").innerHTML=property_tax.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),mortgage_insurance=mi_rate*loan_amount/1200,document.getElementById("Mortgage-Insurance").innerHTML=mortgage_insurance.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),homeowner_insurance=.0025*purchase_price/12,document.getElementById("Homeowner-Insurance").innerHTML=homeowner_insurance.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),housing_expense=principal_interest+property_tax+mortgage_insurance+homeowner_insurance,document.getElementById("Total-Housing-Expenses").innerHTML=housing_expense.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),zip_loan=total_first_loan*zip,document.getElementById("zip-loan").innerHTML=zip_loan.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}),total_loan=total_first_loan+second_loan_amount+zip_loan,document.getElementById("total-loan").innerHTML=total_loan.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}),total_cost=purchase_price+upfront_mip+closing_costs+high_balance_fee,document.getElementById("total-cost").innerHTML=total_cost.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}),loan_to_value=base_loan/purchase_price*100,document.getElementById("LTV").innerHTML=loan_to_value.toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1}),combined_loan_to_value=total_loan/purchase_price*100,document.getElementById("CLTV").innerHTML=combined_loan_to_value.toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1}),buyer_contribution=total_cost-total_loan,buyer_contribution<0?(document.getElementById("buyer-contribution").innerHTML=0,zip_credit=-1*buyer_contribution,document.getElementById("zip_credit").style.display="block",document.getElementById("ZIP_Credit").innerHTML=zip_credit.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})):(document.getElementById("zip_credit").style.display="none",document.getElementById("buyer-contribution").innerHTML=buyer_contribution.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}))}function calc_high_balance_fee(){high_balance_fee=base_loan*(high_balance_fee_rate/100),document.getElementById("High-Balance-Fee").innerHTML=high_balance_fee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function hide_calc_slides(){for(var widget_slides=document.getElementById("calHFA-Widget").getElementsByClassName("widget-slide"),i=0;i<widget_slides.length;i++)$(widget_slides[i]).hide()}function show_slide(id){var element;hide_calc_slides(),$("#"+id).slideDown("slow"),document.getElementById("calHFA-Widget").scrollIntoView(),calc()}calc();