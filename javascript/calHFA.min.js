function current_date_time(){var d=new Date,day=d.getDay(),hour=d.getHours();6==day&&hour>=18?open_monday():0==day?open_tomorrow():hour<10?open_soon():hour>=18?open_tomorrow():show_phone()}function open_monday(){show("opening_monday"),hide("opening_tomorrow"),hide("opening_soon"),hide_phone()}function open_tomorrow(){hide("opening_monday"),show("opening_tomorrow"),hide("opening_soon"),hide_phone()}function open_soon(){hide("opening_monday"),hide("opening_tomorrow"),show("opening_soon"),hide_phone()}function open(){hide("opening_monday"),hide("opening_tomorrow"),hide("opening_soon"),show_phone()}function hide_phone(){show("text"),hide("call"),show("email")}function show_phone(){show("text"),show("call"),show("email")}function slideshow(){setInterval((function(){nextSlide("calHFA-ss"),nextSlide("service-ss"),nextSlide("home-valuation-ss"),nextSlide("dpa-ss"),nextSlide("refinance-ss"),nextSlide("sfr-ss"),nextSlide("flyer-ss")}),2e3)}function nextSlide(id){var elems=document.getElementById(id).getElementsByClassName("slide");elems.index=elems.index||0,elems[elems.index].className="slide",elems.index=(elems.index+1)%elems.length,elems[elems.index].className="slide showing"}function collapsible(idName,className,className2){const array=document.getElementById(idName).getElementsByClassName(className),contents=document.getElementById(idName).getElementsByClassName(className2);for(let i=0;i<array.length;i++)array[i].addEventListener("click",(function(){for(let j=0;j<contents.length;j++)contents[j].style.height="0px";if(this.classList.contains("active"))this.classList.remove("active");else{for(let k=0;k<array.length;k++)array[k].classList.remove("active");this.classList.toggle("active");var content=this.nextElementSibling;content.style.height=content.scrollHeight+"px"}}))}setInterval(current_date_time,1e3),onload=slideshow,collapsible("flyers","collapsible","content");const counties=[{loan:"CalHFA FHA",county:"Los Angeles",loan_limit:726525,down_payment:.035,zip:0},{loan:"CalPLUS FHA with 2% ZIP",county:"Los Angeles",loan_limit:726525,down_payment:.035,zip:.02},{loan:"CalPLUS FHA with 3% ZIP",county:"Los Angeles",loan_limit:726525,down_payment:.035,zip:.03},{loan:"CalHFA Conventional",county:"Los Angeles",loan_limit:726525,down_payment:.03,zip:0},{loan:"CalPLUS Conventional with 2% ZIP",county:"Los Angeles",loan_limit:726525,down_payment:.03,zip:.02},{loan:"CalPLUS Conventional with 3% ZIP",county:"Los Angeles",loan_limit:726525,down_payment:.03,zip:.03},{loan:"CalHFA FHA",county:"San Bernardino",loan_limit:431250,down_payment:.035,zip:0},{loan:"CalPLUS FHA with 2% ZIP",county:"San Bernardino",loan_limit:431250,down_payment:.035,zip:.02},{loan:"CalPLUS FHA with 3% ZIP",county:"San Bernardino",loan_limit:431250,down_payment:.035,zip:.03},{loan:"CalHFA Conventional",county:"San Bernardino",loan_limit:484350,down_payment:.03,zip:0},{loan:"CalPLUS Conventional with 2% ZIP",county:"San Bernardino",loan_limit:484350,down_payment:.03,zip:.02},{loan:"CalPLUS Conventional with 3% ZIP",county:"San Bernardino",loan_limit:484350,down_payment:.03,zip:.03},{loan:"CalHFA_FHA",county:"others",loan_limit:431250,down_payment:.035,zip:0},{loan:"CalPLUS FHA with 2% ZIP",county:"others",loan_limit:431250,down_payment:.035,zip:.02},{loan:"CalPLUS FHA with 3% ZIP",county:"others",loan_limit:431250,down_payment:.035,zip:.03},{loan:"CalHFA Conventional",county:"others",loan_limit:484350,down_payment:.03,zip:0},{loan:"CalPLUS Conventional with 2% ZIP",county:"others",loan_limit:484350,down_payment:.03,zip:.02},{loan:"CalPLUS Conventional with 3% ZIP",county:"others",loan_limit:484350,down_payment:.03,zip:.03}],dpas=[{dpa_program:"MyHome",second_loan_percent:.035},{dpa_program:"School Program",second_loan_percent:.04},{dpa_program:"None",second_loan_percent:0}],calculator="calHFA-Widget",widget_slides=document.getElementById(calculator).getElementsByClassName("widget-slide"),tabcontents=document.getElementById(calculator).getElementsByClassName("tabcontent");function show_tab_content(id){slide_up(tabcontents),slide_down(id)}function slide_up(array){for(let i=0;i<array.length;i++)array[i].style.display="none",array[i].style.height="0px"}function slide_down(id){var content=document.getElementById(id);content.style.display="block",content.style.height=content.scrollHeight+"px"}function get_value(id){return document.getElementById(id).value}function set_value(id,value){document.getElementById(id).value=value}function toString(id,value,digit){document.getElementById(id).innerHTML=value.toLocaleString(void 0,{minimumFractionDigits:digit,maximumFractionDigits:digit})}function show(id){document.getElementById(id).style.display="block"}function hide(id){document.getElementById(id).style.display="none"}function show_slide(id){slide_up(widget_slides),slide_down(id),document.getElementById(calculator).scrollIntoView(),calc()}function calc(){county=get_value("county"),purchase_price=Number(get_value("purchase-price")),toString("Purchase-Price",purchase_price,0),toString("Purchase-Price-2",purchase_price,0),closing_costs=.02*purchase_price,toString("Closing-Costs",closing_costs,0),toString("Closing-Costs-2",closing_costs,0),property_type=get_value("property-type"),loan_program=get_value("loan-program"),document.getElementById("Loan-Program").innerHTML=loan_program,loan_limit=counties.find(loan_limit=>loan_limit.loan===loan_program&&loan_limit.county===county).loan_limit,down_payment=counties.find(down_payment=>down_payment.loan===loan_program).down_payment,zip=counties.find(zip=>zip.loan===loan_program).zip,"VA"===loan_program?mi_rate=0:"CalHFA FHA"===loan_program||"CalPLUS FHA with 2% ZIP"===loan_program||"CalPLUS FHA with 3% ZIP"===loan_program?mi_rate=.85:"CalHFA Conventional"!==loan_program&&"CalPLUS Conventional with 2% ZIP"!==loan_program&&"CalPLUS Conventional with 3% ZIP"!==loan_program||(mi_rate=Number(document.getElementById("mi").value)),toString("MI%",mi_rate,2),subordinate_loan=get_value("subordinate-loan"),show_tab_content(subordinate_loan),document.getElementById("Subordinate-Loan").innerHTML=subordinate_loan,dpa=dpas.find(second_loan_percent=>second_loan_percent.dpa_program===subordinate_loan).second_loan_percent,second_loan_amount=purchase_price*dpa,toString("second-loan-amount",second_loan_amount,0),interest_rate=Number(get_value("expected-interest-rate")),toString("Expected-Interest-Rate",interest_rate,3),high_balance_fee_rate=Number(document.getElementById("high-balance-fee-rate").value),toString("High-Balance-Fee-Rate",high_balance_fee_rate,3),base_loan=purchase_price*(1-down_payment),base_loan>loan_limit&&(base_loan=loan_limit),base_loan>484350?(show("high-balance-loan"),show("high-balance-fee"),calc_high_balance_fee()):(hide("high-balance-loan"),hide("high-balance-fee"),high_balance_fee=0),"CalHFA FHA"===loan_program||"CalPLUS FHA with 2% ZIP"===loan_program||"CalPLUS FHA with 3% ZIP"===loan_program?upfront_mip=.0175*base_loan:upfront_mip=0,toString("upfront",upfront_mip,0),total_first_loan=base_loan+upfront_mip,toString("first-loan",total_first_loan,0);var n=360,r=interest_rate/1200;loan_amount=total_first_loan,principal_interest=loan_amount*r/(1-Math.pow(1/(1+r),n)),toString("Principal-Interest",principal_interest,2),property_tax_rate=.0125,property_tax=property_tax_rate*purchase_price/12,toString("Property-Tax",property_tax,2),mortgage_insurance=mi_rate*loan_amount/1200,toString("Mortgage-Insurance",mortgage_insurance,2),homeowner_insurance=.0025*purchase_price/12,toString("Homeowner-Insurance",homeowner_insurance,2),housing_expense=principal_interest+property_tax+mortgage_insurance+homeowner_insurance,toString("Total-Housing-Expenses",housing_expense,2),zip_loan=total_first_loan*zip,toString("zip-loan",zip_loan,0),total_loan=total_first_loan+second_loan_amount+zip_loan,toString("total-loan",total_loan,0),total_cost=purchase_price+upfront_mip+closing_costs+high_balance_fee,toString("total-cost",total_cost,0),loan_to_value=base_loan/purchase_price*100,toString("LTV",loan_to_value,1),combined_loan_to_value=total_loan/purchase_price*100,toString("CLTV",combined_loan_to_value,1),buyer_contribution=total_cost-total_loan,buyer_contribution<0?(document.getElementById("buyer-contribution").innerHTML=0,zip_credit=-1*buyer_contribution,show("zip_credit"),toString("ZIP_Credit",zip_credit,0)):(hide("zip_credit"),toString("buyer-contribution",buyer_contribution,0))}function calc_high_balance_fee(){high_balance_fee=base_loan*(high_balance_fee_rate/100),toString("High-Balance-Fee",high_balance_fee,2)}calc(),slide_up(widget_slides),slide_down("slide-1");